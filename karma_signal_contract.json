{
  "contract_name": "Canonical Karma Signal Contract",
  "version": "1.0.0",
  "description": "ONE canonical signal schema that KarmaChain MUST produce",
  "fields": {
    "subject_id": {
      "type": "string",
      "description": "UUID of the subject",
      "required": true
    },
    "product_context": {
      "type": "string",
      "description": "Platform context identifier",
      "enum": ["assistant", "game", "finance", "gurukul", "infra", "workflow"],
      "required": true
    },
    "signal": {
      "type": "string",
      "description": "Signal type - only these four values allowed",
      "enum": ["allow", "nudge", "restrict", "escalate"],
      "required": true
    },
    "severity": {
      "type": "number",
      "description": "Severity level from 0.0 to 1.0",
      "minimum": 0.0,
      "maximum": 1.0,
      "required": true
    },
    "ttl": {
      "type": "number",
      "description": "Time to live in seconds",
      "minimum": 1,
      "required": true
    },
    "requires_core_ack": {
      "type": "boolean",
      "description": "MUST be true - all signals require Core authorization",
      "required": true,
      "default": true
    },
    "opaque_reason_code": {
      "type": "string",
      "description": "Opaque reason code - no human-readable explanations",
      "required": true
    }
  },
  "validation_rules": {
    "severity_range": "0.0 to 1.0 inclusive",
    "ttl_minimum": "Must be at least 1 second",
    "core_ack_mandatory": "All signals MUST require Core ACK",
    "signal_types": "Only allow, nudge, restrict, escalate permitted",
    "context_types": "Only predefined contexts permitted"
  },
  "example": {
    "subject_id": "a1b2c3d4-e5f6-7890-abcd-ef1234567890",
    "product_context": "game",
    "signal": "restrict",
    "severity": 0.85,
    "ttl": 300,
    "requires_core_ack": true,
    "opaque_reason_code": "CHEAT_DETECTED_001"
  }
}